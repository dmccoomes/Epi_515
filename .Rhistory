knitr::opts_chunk$set(echo = TRUE)
library(foreign)
library(haven)
link="https://github.com/dmccoomes/Epi_515/raw/master/epi515_missing_data_analysis.dta"
miss <- read_dta(url(link))
miss[!complete.cases(miss),]
#dummy var for missing data
miss$income_miss <- ifelse(is.na(miss$income), 1, 0)
miss$res_miss <- ifelse(is.na(miss$residence), 1, 0)
miss$art_miss <- ifelse(is.na(miss$art_base), 1, 0)
miss$cd4_miss <- ifelse(is.na(miss$cd4cnt_ph), 1, 0)
miss$oi_miss <- ifelse(is.na(miss$oi), 1, 0)
#missing income
summary(miss$cd4cnt_ph[miss$income_miss==1 & miss$visit==1])
summary(miss$cd4cnt_ph[miss$income_miss==0 & miss$visit==1])
summary(miss$oi[miss$income_miss==1 & miss$visit==4])
summary(miss$oi[miss$income_miss==0 & miss$visit==4])
#missing residence
summary(miss$cd4cnt_ph[miss$res_miss==1 & miss$visit==1])
summary(miss$cd4cnt_ph[miss$res_miss==0 & miss$visit==1])
summary(miss$oi[miss$res_miss==1 & miss$visit==4])
summary(miss$oi[miss$res_miss==0 & miss$visit==4])
#missing ART at baseline
summary(miss$cd4cnt_ph[miss$art_miss==1 & miss$visit==1])
summary(miss$cd4cnt_ph[miss$art_miss==0 & miss$visit==1])
summary(miss$oi[miss$art_miss==1 & miss$visit==4])
summary(miss$oi[miss$art_miss==0 & miss$visit==4])
#missing
summary(is.na(miss))
View(miss)
link="https://github.com/dmccoomes/Epi_515/raw/master/epi515_missing_data_analysis.dta"
miss <- read_dta(url(link))
#Reshape wide
ordered<-data[order(miss$id, miss$visit),]
ordered<-data(order[miss$id, miss$visit],)
list<-c(3,11:12)
miss.wide<-reshape(ordered, v.names=names(ordered)[list],
idvar="id", timevar="visit", direction="wide")
ordered<-data[order(miss$id, miss$visit)]
ordered<-miss[order(miss$id, miss$visit),]
list<-c(3,11:12)
miss.wide<-reshape(ordered, v.names=names(ordered)[list],
idvar="id", timevar="visit", direction="wide")
View(miss.wide)
link="https://github.com/dmccoomes/Epi_515/raw/master/epi515_missing_data_analysis.dta"
miss <- read_dta(url(link))
#Reshape wide
ordered<-miss[order(miss$id, miss$visit),]
list<-c(3,11:12)
list<-c("septrin", "cd4cnt_ph", "oi")
miss.wide<-reshape(ordered, v.names=names(ordered)[list],
idvar="id", timevar="visit", direction="wide")
link="https://github.com/dmccoomes/Epi_515/raw/master/epi515_missing_data_analysis.dta"
miss <- read_dta(url(link))
#Reshape wide
ordered<-miss[order(miss$id, miss$visit),]
list<-c(11:12)
#list<-c("septrin", "cd4cnt_ph", "oi")
miss.wide<-reshape(ordered, v.names=names(ordered)[list],
idvar="id", timevar="visit", direction="wide")
link="https://github.com/dmccoomes/Epi_515/raw/master/epi515_missing_data_analysis.dta"
miss <- read_dta(url(link))
#Reshape wide
ordered<-miss[order(miss$id, miss$visit),]
list<-c(3,11:12)
#list<-c("septrin", "cd4cnt_ph", "oi")
miss.wide<-reshape(ordered, v.names=names(ordered)[list],
idvar="id", timevar="visit", direction="wide")
library(stats)
link="https://github.com/dmccoomes/Epi_515/raw/master/epi515_missing_data_analysis.dta"
miss <- read_dta(url(link))
#Reshape wide
ordered<-miss[order(miss$id, miss$visit),]
list<-c(3,11:12)
#list<-c("septrin", "cd4cnt_ph", "oi")
miss.wide<-reshape(ordered, v.names=names(ordered)[list],
idvar="id", timevar="visit", direction="wide")
library(tidyr)
miss.wide <- spread(miss, visit, septrin)
miss.wide<-reshape(data=miss, idvar=id,
v.names=names(ordered)[list],
timevar= "visit",
direction="wide")
miss.wide<-reshape(data=miss, idvar="id",
v.names=names(ordered)[list],
timevar= "visit",
direction="wide")
miss.wide<-reshape(data=miss, idvar="id",
v.names="septrin",
timevar= "visit",
direction="wide")
miss.wide<-reshape(data=miss, idvar="id",
v.names="septrin",
timevar= "visit",
direction="wide")
miss.wide<-reshape(data=miss, idvar="id",
v.names=("septrin", "cd4cnt_ph", "oi"),
miss.wide<-reshape(data=miss, idvar="id",
v.names=("septrin" "cd4cnt_ph" "oi"),
miss.wide<-reshape(data=miss, idvar="id",
v.names="septrin" "cd4cnt_ph" "oi",
miss.wide<-reshape(ordered, v.names=names(ordered)[list],
idvar="id", timevar="visit", direction="wide")
link="https://github.com/dmccoomes/Epi_515/raw/master/epi515_missing_data_analysis.dta"
miss <- read_dta(url(link))
#Reshape wide
ordered<-miss[order(miss$id, miss$visit),]
list<-c(11:12)
#list<-c("septrin", "cd4cnt_ph", "oi")
miss.wide<-reshape(ordered, v.names=names(ordered)[list],
idvar="id", timevar="visit", direction="wide")
library(reshape2)
miss.wide_2 <- dcast(melt(miss, id.vars=c("id", "visit")), id~oi+visit)
miss.wide_2 <- dcast(melt(miss, id.vars=c("id", "visit")), id~"oi"+visit)
View(miss.wide_2)
miss.wide_2 <- dcast(melt(miss, id.vars=c("id", "visit")), id+visit~"oi"+visit)
miss.wide_2 <- dcast(melt(miss, id.vars=c("id", "visit")), id~"oi"+visit+septrin)
miss.wide_2 <- dcast(melt(miss, id.vars=c("id", "visit")), id~"oi"+visit+"septrin")
miss.wide_2 <- dcast(melt(miss, id.vars=c("id", "visit", "site", "sex", "age", "activity")), id~"oi"+visit, "septrin"+visit)
miss.wide_2 <- dcast(melt(miss, id.vars=c("id", "visit", "site", "sex", "age", "activity")), id~"oi"+"visit", "septrin"+"visit")
miss.wide_2 <- dcast(melt(miss, id.vars=c("id", "visit", "site", "sex", "age", "activity")), id~"oi"+visit, "septrin"+visit)
miss.wide_2 <- dcast(melt(miss, id.vars=c("id", "visit", "site", "sex", "age", "activity")), id~"oi"+visit+site+sex+age+activity, "septrin"+visit)
miss.wide_2 <- dcast(melt(miss, id.vars=c("id", "visit", "site", "sex", "age", "activity")), id~"oi"+visit+site+sex+age+activity)
miss.wide_2 <- dcast(melt(miss, id.vars=c("id", "visit", "site", "sex", "age", "activity")), id~"oi"+visit)
miss.wide_2 <- dcast(melt(miss, id.vars=c("id", "visit")), id~"oi"+visit)
miss.wide<-reshape(data=miss, idvar="id",
v.names="septrin" "cd4cnt_ph" "oi",
miss.wide<-reshape(data=miss, idvar="id",
v.names="septrin",
timevar= "visit",
direction="wide")
miss.wide<-reshape(data=miss, idvar="id",
timevar= "visit",
direction="wide")
link="https://github.com/dmccoomes/Epi_515/raw/master/epi528_missing_data_analysis_WIDE.dta"
miss.wide <- read_dta(url(link))
summary(is.na(miss.wide))
miss.wide[!complete.cases(miss.wide),]
miss$income_miss <- ifelse(is.na(miss$income), 1, 0)
miss$income_miss <- ifelse(is.na(miss$income), 1, 0)
miss$res_miss <- ifelse(is.na(miss$residence), 1, 0)
miss$art_miss <- ifelse(is.na(miss$art_base), 1, 0)
miss$cd4_miss <- ifelse(is.na(miss$cd4cnt_ph1), 1, 0)
summary(miss.wide$cd4cnt_ph1[is.na(miss.wide$income)])
summary(is.na(miss.wide))
summary(miss.wide$cd4cnt_ph1[is.na(miss.wide$income)])
summary(miss.wide$income[is.na(miss.wide$cd4cnt_ph1)])
summary(miss.wide$income[miss.wide$cd4cnt_ph1>0])
summary(miss.wide$income[miss.wide$cd4cnt_ph1>0])
summary(miss.wide$income[is.na(miss.wide$cd4cnt_ph1)])
summary(miss.wide$income[miss.wide$cd4cnt_ph1>0])
summary(miss.wide$income[is.na(miss.wide$cd4cnt_ph1)])
summary(miss.wide$income[miss.wide$cd4cnt_ph1>0])
miss.wide$exp_miss <- ifelse(is.na(miss.wide$cd4cnt_ph1), 1, 0)
miss.wide$out_miss <- ifelse(is.na(miss.wide$oi1), 1, 0)
summary(miss.wide$income[miss.wide$exp_miss==1])
summary(miss.wide$income[miss.wide$exp_miss==0])
summary(miss.wide$income[miss.wide$out_miss==1])
summary(miss.wide$income[miss.wide$out_miss==0])
summary(miss.wide$income)
summary(miss.wide$site[miss.wide$exp_miss==1])
summary(miss.wide$site[miss.wide$exp_miss==0])
summary(miss.wide$site[miss.wide$out_miss==1])
summary(miss.wide$site[miss.wide$out_miss==0])
summary(miss.wide$site)
summary(miss.wide$sex[miss.wide$exp_miss==1])
summary(miss.wide$sex[miss.wide$exp_miss==0])
summary(miss.wide$sex[miss.wide$out_miss==1])
summary(miss.wide$sex[miss.wide$out_miss==0])
summary(miss.wide$sex)
summary(miss.wide$age[miss.wide$exp_miss==1])
summary(miss.wide$age[miss.wide$exp_miss==0])
summary(miss.wide$age[miss.wide$out_miss==1])
summary(miss.wide$age[miss.wide$out_miss==0])
summary(miss.wide$age)
library(psych)
install.packages("psych")
library(psych)
describe.by(miss.wide, exp_miss)
describe.by(miss.wide, miss.wide$exp_miss)
0
1
describe.by(miss.wide, miss.wide$exp_miss, mean)
describe.by(miss.wide, miss.wide$exp_miss)
